# Restful api –ø—Ä–∞–∫—Ç–∏–∫–∞

–ü—Ä–æ—î–∫—Ç —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–æ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ **RESTful API**. –í–∑–∞—î–º–æ–¥—ñ—è –º—ñ–∂ Frontend (React) —Ç–∞ Backend (Node.js/Express) –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ HTTP-–∑–∞–ø–∏—Ç–∏.

### –û—Å–Ω–æ–≤–Ω—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:

- **Server-Side Filtering:** –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—ñ —Å–µ—Ä–≤–µ—Ä–∞, –∞ –Ω–µ –∫–ª—ñ—î–Ω—Ç–∞. –¶–µ –∑–Ω–∏–∂—É—î –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –±—Ä–∞—É–∑–µ—Ä —ñ –∑–º–µ–Ω—à—É—î –æ–±—Å—è–≥ –ø–µ—Ä–µ–¥–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö.
- **Query Parameters:** –î–ª—è –≥–Ω—É—á–∫–æ–≥–æ –ø–æ—à—É–∫—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É –≤ URL.
- **Stateless:** –ö–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –º—ñ—Å—Ç–∏—Ç—å –≤—Å—é –Ω–µ–æ–±—Ö—ñ–¥–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –¥–ª—è –æ–±—Ä–æ–±–∫–∏.

### Endpoints

| Method | Endpoint | –û–ø–∏—Å | –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ |
| :--- | :--- | :--- | :--- |
| **Films** | | | |
| `GET` | `/films` | –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö —Ñ—ñ–ª—å–º—ñ–≤ | - |
| `GET` | `/films/:id` | –û—Ç—Ä–∏–º–∞—Ç–∏ –¥–µ—Ç–∞–ª—ñ —Ñ—ñ–ª—å–º—É –∑–∞ ID | - |
| `GET` | `/films/favourites` | –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –æ–±—Ä–∞–Ω–∏—Ö —Ñ—ñ–ª—å–º—ñ–≤ | - |
| `GET` | `/films/sortpage` | **–†–æ–∑—à–∏—Ä–µ–Ω–∏–π –ø–æ—à—É–∫** (—Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è) | Query: `minpopularity`, `minageRating`, `name` |
| `PATCH`| `/films/:id/favourite` | –î–æ–¥–∞—Ç–∏/–ø—Ä–∏–±—Ä–∞—Ç–∏ —Ñ—ñ–ª—å–º –∑ –æ–±—Ä–∞–Ω–æ–≥–æ (toggle) | - |
| `PATCH`| `/films/:id/rate` | –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –æ—Ü—ñ–Ω–∫—É —Ñ—ñ–ª—å–º—É | Body: `{ "rating": 5 }` |
| `DELETE`| `/film/delete/:id` | –í–∏–¥–∞–ª–∏—Ç–∏ —Ñ—ñ–ª—å–º –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö | - |
| **Users** | | | |
| `POST` | `/register` | –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ | Body: `{ "name": "Ivan" }` |
| `GET` | `/login` | –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ —É—Å—ñ—Ö —é–∑–µ—Ä—ñ–≤ | - |
| `GET` | `/login/:id` | –û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—é (–∞–±–æ –∞–≤—Ç–æ-—Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Guest) | - |

---

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Main` –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –≥–æ–ª–æ–≤–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ç–∞ —Å–ª–∞–π–¥–µ—Ä–∞ –∑ —Ñ—ñ–ª—å–º–∞–º–∏. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–∞ –ø—Ä–∏–Ω—Ü–∏–ø–æ–º **Client-Side Rendering (CSR)**.

**–õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏:**

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `Main` –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é, –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —ñ–∑ —Å–µ—Ä–≤–µ—Ä–∞ —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Å–ª–∞–π–¥–µ—Ä–∞. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∑–∞ –ø—Ä–∏–Ω—Ü–∏–ø–æ–º **Client-Side Rendering (CSR)**.

**–õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏ –ø–æ–∫—Ä–æ–∫–æ–≤–æ:**

1.  **Initialization (–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è):**
    –ü—Ä–∏ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ö—É–∫ `useState`, —è–∫–∏–π —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î –ø–æ—Ä–æ–∂–Ω—ñ–π –º–∞—Å–∏–≤ `films`. –¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î –ø–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É –¥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö.
    ```javascript
    const [films, setFilms] = useState([]) 
    ```

2.  **API Call (–ó–∞–ø–∏—Ç –¥–æ —Å–µ—Ä–≤–µ—Ä–∞):**
    –•—É–∫ `useEffect` —ñ–∑ –ø–æ—Ä–æ–∂–Ω—ñ–º –º–∞—Å–∏–≤–æ–º –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π `[]` –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ HTTP-–∑–∞–ø–∏—Ç `GET /films` –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ ‚Äî –æ–¥—Ä–∞–∑—É –ø—ñ—Å–ª—è –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
    ```javascript
    useEffect(() => {
        fetch('http://localhost:3000/films')
            .then(res => res.json())
            .then(data => setFilms(data))
            .catch(err => console.error(err))
    }, [])
    ```

3.  **State Update (–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É):**
    –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ –±–µ–∫–µ–Ω–¥—É (JSON), –¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Å—Ç–µ–π—Ç —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü—ñ—é `setFilms`.
    ```javascript
    .then(data => setFilms(data)) // React –ø–ª–∞–Ω—É—î —Ä–µ-—Ä–µ–Ω–¥–µ—Ä
    ```

4.  **Rendering (–í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è):**
    –ó–º—ñ–Ω–∞ —Å—Ç–µ–π—Ç—É –≤–∏–∫–ª–∏–∫–∞—î —Ä–µ-—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. –ú–µ—Ç–æ–¥ `.map()` –≥–µ–Ω–µ—Ä—É—î –¥–∏–Ω–∞–º—ñ—á–Ω–∏–π —Å–ø–∏—Å–æ–∫ —Å–ª–∞–π–¥—ñ–≤ `SwiperSlide`. –î–∞–Ω—ñ –ø—Ä–æ –∫–æ–∂–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ñ—ñ–ª—å–º –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è —É –¥–æ—á—ñ—Ä–Ω—ñ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–µ—Ä–µ–∑ **props**.
    ```jsx
    {films.map((item, index) => (
        <SwiperSlide className='slide' key={index}>
            <BlockFilm film={item} /> {/* –ü–µ—Ä–µ–¥–∞—á–∞ –æ–±'—î–∫—Ç–∞ film */}
        </SwiperSlide>
    ))}
    ```

---

### 2. BlockFilm Component: Interaction & Logic üß©

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `BlockFilm` –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –æ–∫—Ä–µ–º–æ—ó –∫–∞—Ä—Ç–∫–∏ —Ñ—ñ–ª—å–º—É —Ç–∞ –æ–±—Ä–æ–±–∫—É –≤–∑–∞—î–º–æ–¥—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –Ω–µ—é (–Ω–∞–≤—ñ–≥–∞—Ü—ñ—è, –ª–∞–π–∫–∏, –≤–∏–¥–∞–ª–µ–Ω–Ω—è).

#### ‚ù§Ô∏è –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è "–û–±—Ä–∞–Ω–∏–º" (Local State & PATCH)
–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–∞—î –≤–ª–∞—Å–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–∏–π —Å—Ç–µ–π—Ç `isFav` –¥–ª—è –º–∏—Ç—Ç—î–≤–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–º—ñ–Ω–∏ —Å—Ç–∞—Ç—É—Å—É (–ª–∞–π–∫/–¥–∏–∑–ª–∞–π–∫) –±–µ–∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏—Ç–∏ –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ —Ñ—ñ–ª—å–º—ñ–≤ (Optimistic UI update).

* **–ó–∞–ø–∏—Ç:** –ü—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ ‚ù§Ô∏è –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è `PATCH` –∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
* **–û–Ω–æ–≤–ª–µ–Ω–Ω—è:** –Ø–∫—â–æ —Å–µ—Ä–≤–µ—Ä –ø–æ–≤–µ—Ä–Ω—É–≤ `200 OK`, –ª–æ–∫–∞–ª—å–Ω–∏–π —Å—Ç–µ–π—Ç –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è, –∑–º—ñ–Ω—é—é—á–∏ —ñ–∫–æ–Ω–∫—É.

```javascript
const [isFav, setIsFav] = useState(film.isFavorite)

// –õ–æ–≥—ñ–∫–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏ –∫–ª—ñ–∫—É
fetch(`http://localhost:3000/films/${film.id}/favourite`, { method: 'PATCH' })
    .then(res => {
        if (res.ok) setIsFav(true) // –ê–±–æ toggle –ª–æ–≥—ñ–∫–∞: setIsFav(!isFav)
    })