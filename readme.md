# –û—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–∏–π –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫—É –∑ fulltack crud
---
## 2. –ó–≤—ñ–¥–∫–∏ –±–µ—Ä—É—Ç—å—Å—è –¥–∞–Ω—ñ (–ü–æ—Ç—ñ–∫: –ë–µ–∫–µ–Ω–¥ ‚Üí –§—Ä–æ–Ω—Ç–µ–Ω–¥)
–í–µ—Å—å –ø—Ä–æ—Ü–µ—Å –æ—Ç—Ä–∏–º–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —Ñ—ñ–ª—å–º—ñ–≤ –º–æ–∂–Ω–∞ –ø–æ–¥—ñ–ª–∏—Ç–∏ –Ω–∞ —Ç—Ä–∏ –∫—Ä–æ–∫–∏.

### –ö—Ä–æ–∫ 1: –î–∂–µ—Ä–µ–ª–æ –¥–∞–Ω–∏—Ö (–ë–∞–∑–∞)

–ù–∞ —Å–µ—Ä–≤–µ—Ä—ñ —î –º–∞—Å–∏–≤ –æ–±'—î–∫—Ç—ñ–≤ ‚Äî —Ü–µ –Ω–∞—à–∞ —ñ–º–ø—Ä–æ–≤—ñ–∑–æ–≤–∞–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö. 
### –ö—Ä–æ–∫ 2: –†–æ–∑–¥–∞—á–∞ –¥–∞–Ω–∏—Ö (API)

–°–µ—Ä–≤–µ—Ä –Ω–∞ `express` –º–∞—î –º–∞—Ä—à—Ä—É—Ç (–µ–Ω–¥–ø–æ—ñ–Ω—Ç), —è–∫–∏–π "—Å–ª—É—Ö–∞—î" –∞–¥—Ä–µ—Å—É `/films`. –ö–æ–ª–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑–∞–ø–∏—Ç, —Å–µ—Ä–≤–µ—Ä –±–µ—Ä–µ –º–∞—Å–∏–≤ –∑ –ö—Ä–æ–∫—É 1 —ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –π–æ–≥–æ —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å (`res.json`). 


### –ö—Ä–æ–∫ 3: –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö (React)

–£ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ `Main.js` —Å–ø—Ä–∞—Ü—å–æ–≤—É—î —Ö—É–∫ `useEffect`. –í—ñ–Ω —Ä–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç (`fetch`) –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –æ—Ç—Ä–∏–º—É—î –¥–∞–Ω—ñ —Ç–∞ –∑–∞–ø–∏—Å—É—î —ó—Ö —É —Å—Ç–∞–Ω (`setFilms`). 

---

## 3. –î–∏–Ω–∞–º—ñ—á–Ω–∏–π –†–æ—É—Ç–∏–Ω–≥ (–Ø–∫ –≤—ñ–¥–∫—Ä–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Ñ—ñ–ª—å–º)

–Ø–∫ –ø—Ä–æ–≥—Ä–∞–º–∞ —Ä–æ–∑—É–º—ñ—î, –ø–æ —è–∫–æ–º—É —Å–∞–º–µ —Ñ—ñ–ª—å–º—É –º–∏ –∫–ª—ñ–∫–Ω—É–ª–∏?

### –ï—Ç–∞–ø 1: –ö–ª—ñ–∫ —ñ –∑–º—ñ–Ω–∞ URL (BlockFilm)

–£ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ `Main` –º–∏ –ø–µ—Ä–µ–±–∏—Ä–∞—î–º–æ –º–∞—Å–∏–≤ —á–µ—Ä–µ–∑ `.map()`. –ö–æ–∂–µ–Ω `BlockFilm` –æ—Ç—Ä–∏–º—É—î —Å–≤–æ—ó –¥–∞–Ω—ñ —á–µ—Ä–µ–∑ `props` —ñ –∑–Ω–∞—î —Å–≤—ñ–π `id`.

–ö–æ–ª–∏ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –∫–ª—ñ–∫:

1. –ë–µ—Ä–µ—Ç—å—Å—è **ID** –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ—ñ–ª—å–º—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `1`).
    
2. –§—É–Ω–∫—Ü—ñ—è `Maps` (—É –∫–æ–¥—ñ) –∑–º—ñ–Ω—é—î –∞–¥—Ä–µ—Å—É –≤ –±—Ä–∞—É–∑–µ—Ä—ñ –Ω–∞: `http://localhost:5173/film/1`.
    

> **–†–µ–∑—É–ª—å—Ç–∞—Ç –µ—Ç–∞–ø—É:** –ú–∏ –∑–∞–ø–∏—Å–∞–ª–∏ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π –Ω–æ–º–µ—Ä —Ñ—ñ–ª—å–º—É –ø—Ä—è–º–æ –≤ URL-–∞–¥—Ä–µ—Å—É –±—Ä–∞—É–∑–µ—Ä–∞.

### –ï—Ç–∞–ø 2: –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è (Router)

–£ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö —Ä–æ—É—Ç–µ—Ä–∞ (`App.js` –∞–±–æ `main.jsx`) –≤–∫–∞–∑–∞–Ω–æ, —â–æ —á–∞—Å—Ç–∏–Ω–∞ —à–ª—è—Ö—É —î –∑–º—ñ–Ω–Ω–æ—é (`:id`).

### –ï—Ç–∞–ø 3: –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è ID (useParams)

–°—Ç–æ—Ä—ñ–Ω–∫–∞ `FilmPage` –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è. –í–æ–Ω–∞ –Ω–µ –∑–Ω–∞—î, –∫—É–¥–∏ —Ç–∏ –∫–ª—ñ–∫–Ω—É–≤, –∞–ª–µ –≤–æ–Ω–∞ –±–∞—á–∏—Ç—å URL. –¢—É—Ç –ø—Ä–∞—Ü—é—î —Ö—É–∫ **`useParams`**.

JavaScript

```
const { id } = useParams()
```

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**

1. **–ê–¥—Ä–µ—Å–∞ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:** `/film/5`.
    
2. **`useParams`** –±–∞—á–∏—Ç—å, —â–æ –≤ —Ä–æ—É—Ç–µ—Ä—ñ —Ü–µ –º—ñ—Å—Ü–µ –Ω–∞–∑–≤–∞–Ω–æ `:id`.
    
3. **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –•—É–∫ –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç `{ id: '5' }`.
    
4. –ú–∏ –¥–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑—É—î–º–æ –π–æ–≥–æ —ñ –æ—Ç—Ä–∏–º—É—î–º–æ –∑–º—ñ–Ω–Ω—É `id`.
    

### –ü—ñ–¥—Å—É–º–æ–∫ "–®–ª—è—Ö—É ID"

1. **Main.js**: –ú–∞—Å–∏–≤ —Ñ—ñ–ª—å–º—ñ–≤ ‚Üí `map` ‚Üí –ø–µ—Ä–µ–¥–∞—î –æ–±'—î–∫—Ç (–∑ ID) —É `BlockFilm`.
    
2. **BlockFilm.js**: –ö–ª—ñ–∫ ‚Üí `Maps('/film/5')` ‚Üí ID —Å—Ç–∞—î —á–∞—Å—Ç–∏–Ω–æ—é URL.
    
3. **URL**: –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—É—î `/film/5`.
    
4. **FilmPage.js**: `useParams()` —á–∏—Ç–∞—î URL ‚Üí –¥—ñ—Å—Ç–∞—î `5`.
    
5. **Fetch**: –†–æ–±–∏—Ç—å –∑–∞–ø–∏—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä (`/films/5`) ‚Üí –æ—Ç—Ä–∏–º—É—î –¥–µ—Ç–∞–ª—ñ —Å–∞–º–µ —Ü—å–æ–≥–æ —Ñ—ñ–ª—å–º—É.
    

> **–í–∏—Å–Ω–æ–≤–æ–∫:** URL-–∞–¥—Ä–µ—Å–∞ –≤–∏—Å—Ç—É–ø–∞—î –ø–æ—Å–µ—Ä–µ–¥–Ω–∏–∫–æ–º (—Å—Ö–æ–≤–∏—â–µ–º —Å—Ç–∞–Ω—É), –ø–µ—Ä–µ–¥–∞—é—á–∏ ID –≤—ñ–¥ –æ–¥–Ω—ñ—î—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–æ —ñ–Ω—à–æ—ó.
---

–ù–∞–≤—ñ—â–æ –ø–∏—Å–∞—Ç–∏ `method: 'PATCH'`?

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –±—Ä–∞—É–∑–µ—Ä (—ñ `fetch`) –∑–∞–≤–∂–¥–∏ —Ä–æ–±–∏—Ç—å **GET** –∑–∞–ø–∏—Ç.

- **GET** ‚Äî —Ü–µ –ø—Ä–æ—Å—Ç–æ "–¥–∞–π –º–µ–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫—É" (—á–∏—Ç–∞–Ω–Ω—è). –£ GET-–∑–∞–ø–∏—Ç—ñ–≤ **–Ω–µ–º–∞—î —Ç—ñ–ª–∞ (`body`)**.
    
- –Ø–∫—â–æ —Ç–∏ —Ö–æ—á–µ—à –ø–µ—Ä–µ–¥–∞—Ç–∏ –¥–∞–Ω—ñ (—Ä–µ–π—Ç–∏–Ω–≥), —Ç–æ–±—ñ —Ç—Ä–µ–±–∞ –∑–º—ñ–Ω–∏—Ç–∏ –º–µ—Ç–æ–¥ –Ω–∞ `POST`, `PUT` –∞–±–æ `PATCH`.
    
- –ë–µ–∑ —Ü—å–æ–≥–æ —Ä—è–¥–∫–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ–¥—É–º–∞—î, —â–æ —Ç–∏ –ø—Ä–æ—Å—Ç–æ —Ö–æ—á–µ—à _–æ—Ç—Ä–∏–º–∞—Ç–∏_ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ —Ñ—ñ–ª—å–º, –∞ –Ω–µ –æ–Ω–æ–≤–∏—Ç–∏ —ó—ó.

–ù–∞–≤—ñ—â–æ `headers: { 'Content-Type': 'application/json' }`?

–°–µ—Ä–≤–µ—Ä "–¥—É—Ä–Ω–∏–π". –ö–æ–ª–∏ –¥–æ –Ω—å–æ–≥–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∑–∞–ø–∏—Ç, –≤—ñ–Ω –±–∞—á–∏—Ç—å –ø—Ä–æ—Å—Ç–æ –∫—É–ø—É —Ç–µ–∫—Å—Ç—É (–±–∞–π—Ç–∏). –í—ñ–Ω –Ω–µ –∑–Ω–∞—î, —â–æ —Ç–∏ –π–æ–º—É –ø—Ä–∏—Å–ª–∞–≤:

- –ö–∞—Ä—Ç–∏–Ω–∫—É?
    
- –ó–≤–∏—á–∞–π–Ω–∏–π —Ç–µ–∫—Å—Ç?
    
- –§–æ—Ä–º—É –∑ —Å–∞–π—Ç—É?
    
- JSON?
    

–ó–∞–≥–æ–ª–æ–≤–æ–∫ `Content-Type: application/json` ‚Äî —Ü–µ —è–∫ –Ω–∞–ª—ñ–ø–∫–∞ –Ω–∞ –ø–æ—Å–∏–ª—Ü—ñ: **"–í—Å–µ—Ä–µ–¥–∏–Ω—ñ –ª–µ–∂–∏—Ç—å JSON, –±—É–¥—å –ª–∞—Å–∫–∞, –ø–∞—Ä—Å–∏ –π–æ–≥–æ —è–∫ –æ–±'—î–∫—Ç!"**. –ë–µ–∑ —Ü—å–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `req.body` –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ –±—É–¥–µ **–ø–æ—Ä–æ–∂–Ω—ñ–º (`undefined` –∞–±–æ `{}`)**, –±–æ Express –Ω–µ –∑–Ω–∞—Ç–∏–º–µ, —è–∫ –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ.

---
# üì° HTTP: –†—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ URL (–ú–∞—Ä—à—Ä—É—Ç–æ–º) —Ç–∞ Body (–¢—ñ–ª–æ–º)

**–ö–æ–Ω—Ü–µ–ø—Ü—ñ—è:** –í REST API –∞–¥—Ä–µ—Å–∞ –∫–∞–∂–µ **–ö–£–î–ò** –π—Ç–∏ —ñ **–©–û** —Ä–æ–±–∏—Ç–∏, –∞ —Ç—ñ–ª–æ –∑–∞–ø–∏—Ç—É –∫–∞–∂–µ **–ó –ß–ò–ú** —Ü–µ —Ä–æ–±–∏—Ç–∏.

### 1. –†–æ–ª—å URL (`/films/:id/rate`) –¶–µ **–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü—ñ—è (Routing)**. –£ —Ä—è–¥–∫—É `app.patch('/films/:id/rate', ...)` —Å–ª–æ–≤–æ `rate` ‚Äî —Ü–µ –ø—Ä–æ—Å—Ç–æ —Å—Ç–∞—Ç–∏—á–Ω–∏–π —Ç–µ–∫—Å—Ç.

* –í–æ–Ω–æ –Ω–µ –Ω–µ—Å–µ –≤ —Å–æ–±—ñ –¥–∞–Ω–∏—Ö (—Ü–∏—Ñ—Ä 1, 5 —á–∏ 10). 
* –í–æ–Ω–æ —Å–ª—É–≥—É—î **–ø–µ—Ä–µ–º–∏–∫–∞—á–µ–º**. –ë–µ–∑ –Ω—å–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –Ω–µ –≤—ñ–¥—Ä—ñ–∑–Ω–∏—Ç—å —Ü–µ–π –∑–∞–ø–∏—Ç –≤—ñ–¥ –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ñ—ñ–ª—å–º—É. * `/films/1` (PATCH) ‚Äî –æ–Ω–æ–≤–∏—Ç–∏ –Ω–∞–∑–≤—É –∞–±–æ —Ä—ñ–∫. * `/films/1/rate` (PATCH) ‚Äî –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –æ—Ü—ñ–Ω–∫—É.
> **–ê–Ω–∞–ª–æ–≥—ñ—è:** 
* `films` ‚Äî —Ü–µ –±—É–¥–∏–Ω–æ–∫. 
* `:id` ‚Äî —Ü–µ –Ω–æ–º–µ—Ä –∫–≤–∞—Ä—Ç–∏—Ä–∏. 
* `rate` ‚Äî —Ü–µ –Ω–∞–ø–∏—Å –Ω–∞ –¥–≤–µ—Ä—è—Ö –∫—ñ–º–Ω–∞—Ç–∏ "–û—Ü—ñ–Ω—é–≤–∞–ª—å–Ω–∞". 
* –ú–∏ –ø—Ä–æ—Å—Ç–æ –∑–∞—Ö–æ–¥–∏–º–æ –≤ —Ü—é –∫—ñ–º–Ω–∞—Ç—É.

### 2. –†–æ–ª—å Body (`req.body`)
–¶–µ **–∫–æ—Ä–∏—Å–Ω–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (Payload)**. –°–∞–º–µ —Ç—É—Ç –ª–µ–∂–∏—Ç—å **–∑–Ω–∞—á–µ–Ω–Ω—è** (–¥–∞–Ω—ñ).

* URL –±–∞—á–∞—Ç—å —É—Å—ñ (–≤—ñ–Ω —É —Å—Ç—Ä—ñ—á—Ü—ñ –±—Ä–∞—É–∑–µ—Ä–∞). 
* Body –ø—Ä–∏—Ö–æ–≤–∞–Ω–µ "–≤—Å–µ—Ä–µ–¥–∏–Ω—ñ" –∑–∞–ø–∏—Ç—É. 
* –ú–∏ –±–µ—Ä–µ–º–æ –¥–∞–Ω—ñ –∑–≤—ñ–¥—Å–∏: `const { rating } = req.body`
### 3. –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–∞ –ø—Ä–∏–∫–ª–∞–¥—ñ –∫–æ–¥—É
**–ó–∞–ø–∏—Ç –∫–ª—ñ—î–Ω—Ç–∞ (Fetch):** ```javascript fetch('http://localhost:3000/films/55/rate', { // <--- –ê–î–†–ï–°–ê (–ö—É–¥–∏ —Å—Ç—É–∫–∞—Ç–∏) 
method: 'PATCH', 
body: JSON.stringify({ rating: 9 }) // <--- –î–ê–ù–Ü (–©–æ –ø–µ—Ä–µ–¥–∞—Ç–∏) })

app.patch('/films/:id/rate', (req, res) => {
    // 1. –†–æ–∑–±–∏—Ä–∞—î–º–æ –ê–î–†–ï–°–£
    // 'rate' —Ç—É—Ç –ø—Ä–æ—Å—Ç–æ –¥–æ–ø–æ–º–æ–≥–ª–æ Express-—É –∑–Ω–∞–π—Ç–∏ —Ü–µ–π —à–º–∞—Ç–æ–∫ –∫–æ–¥—É.
    console.log(req.params.id); // "55" (–Ø–∫–∏–π —Ñ—ñ–ª—å–º?)

    // 2. –†–æ–∑–±–∏—Ä–∞—î–º–æ –î–ê–ù–Ü
    console.log(req.body.rating); // 9 (–Ø–∫–∞ –æ—Ü—ñ–Ω–∫–∞?)
})


